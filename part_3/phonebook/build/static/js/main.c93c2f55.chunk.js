(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{25:function(e,n,t){},45:function(e,n,t){"use strict";t.r(n);var r=t(2),a=t.n(r),c=t(19),o=t.n(c),i=(t(25),t(20)),s=t(10),u=t(3),d=t(0),l=function(e){var n=e.newSearch,t=e.handleSearchChange;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{children:["filter shown with ",Object(d.jsx)("input",{value:n,onChange:t})]})})},b=function(e){var n=e.addPerson,t=e.newName,r=e.handleNameChange,a=e.newNumber,c=e.handleNumberChange;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("form",{onSubmit:n,children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{value:t,onChange:r})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{value:a,onChange:c})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})})},h=t(5),j=t.n(h),m="/api/persons",f=function(){return j.a.get(m).then((function(e){return e.data}))},g=function(e){return j.a.post(m,e).then((function(e){return e.data}))},O=function(e,n){return j.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return j.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.statusText}))},x=function(e){var n=e.name,t=e.number,r=e.id,a=e.setPersons,c=e.persons,o=e.setMessage;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("p",{children:[n," ",t,Object(d.jsx)("button",{name:n,id:r,onClick:function(e){window.confirm("Delete ".concat(e.target.name,"?"))&&v(e.target.id).then((function(n){"No Content"===n&&(a(c.filter((function(n){return n.id!==e.target.id}))),o("".concat(e.target.name," has been removed from the server")),setTimeout((function(){return o(null)}),5e3))}))},children:"Delete"})]})})},p=function(e){var n=e.personsToShow,t=e.setPersons,r=e.persons,a=e.setMessage;return Object(d.jsx)(d.Fragment,{children:n.map((function(e){return Object(d.jsx)(x,{persons:r,setMessage:a,setPersons:t,id:e.id,name:e.name,number:e.number},e.name)}))})},w=function(e){var n=e.message;return null===n?null:n.includes("removed")?Object(d.jsx)("div",{className:"notification",style:{color:"red",background:"lightgrey",fontSize:20,borderRadius:5,borderStyle:"solid",padding:10,marginBottom:"10px"},children:n}):Object(d.jsx)("div",{className:"notification",style:{color:"green",background:"lightgrey",fontSize:20,borderRadius:5,borderStyle:"solid",padding:10,marginBottom:"10px"},children:n})},S=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1];Object(r.useEffect)((function(){f().then((function(e){return a(e)}))}),[]);var c=Object(r.useState)(""),o=Object(u.a)(c,2),h=o[0],j=o[1],m=Object(r.useState)(""),v=Object(u.a)(m,2),x=v[0],S=v[1],C=Object(r.useState)(""),N=Object(u.a)(C,2),y=N[0],k=N[1],P=Object(r.useState)(!0),T=Object(u.a)(P,2),F=T[0],M=T[1],B=Object(r.useState)(null),D=Object(u.a)(B,2),L=D[0],z=D[1],E=F?t:t.filter((function(e){return e.name.toLowerCase().startsWith(y.toLowerCase())}));return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(w,{message:L}),Object(d.jsx)(l,{value:y,onChange:function(e){var n;(null===(n=e.target.value)||void 0===n?void 0:n.length)>0?(k(e.target.value),M(!1)):(k(e.target.value),M(!0))}}),Object(d.jsx)("h2",{children:" "}),Object(d.jsx)(b,{addPerson:function(e){var n;if(e.preventDefault(),t.find((function(e){return e.name===h&&(n=e),e.name===h}))){if(window.confirm("".concat(h," is already added to phonebook, replace the old number with a new one?"))){var r=Object(s.a)(Object(s.a)({},n),{},{number:x});O(n.id,r).then((function(e){a([].concat(Object(i.a)(t.filter((function(e){return e.id!==n.id}))),[r])),z("".concat(r.name,"'s number has been changed!")),setTimeout((function(){return z(null)}),5e3)})).catch((function(e){z("".concat(n.name," has already been removed from the server")),setTimeout((function(){return z(null)}),5e3)}))}}else g({name:h,number:x}).then((function(e){console.log(e),a(t.concat(e)),j(""),S(""),z("Added ".concat(h)),setTimeout((function(){return z(null)}),5e3)}))},newName:h,handleNameChange:function(e){j(e.target.value)},newNumber:x,handleNumberChange:function(e){S(e.target.value)}}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(p,{personsToShow:E,setPersons:a,setMessage:z,persons:t})]})},C=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,46)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(S,{})}),document.getElementById("root")),C()}},[[45,1,2]]]);
//# sourceMappingURL=main.c93c2f55.chunk.js.map